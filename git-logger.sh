#!/bin/sh

start_date="2021-10-01"
git log --since="$start_date" --pretty=format:'{%n  ^^^^commitHash^^^^: ^^^^%H^^^^,  %n  ^^^^parent^^^^: ^^^^%P^^^^,  %n  ^^^^subject^^^^: ^^^^%s^^^^,  %n  ^^^^sanitized_subject_line^^^^: ^^^^%f^^^^,  %n  ^^^^commit_notes^^^^: ^^^^%N^^^^,  %n  ^^^^body^^^^: ^^^^%b^^^^,  %n  ^^^^author_name^^^^: ^^^^%aN^^^^,  ^^^^commiter_name^^^^: ^^^^%cN^^^^,%n    ^^^^date^^^^: ^^^^%cD^^^^%n},'| sed 's/"/\\"/g' | sed 's/\^^^^/"/g' | sed "$ s/,$//" | sed -e ':a' -e 'N' -e '$!ba' -e 's/\n/ /g' | tr -d '\r\n' | awk 'BEGIN { print("[") } { print($0) } END { print("]") }' > git-log.json